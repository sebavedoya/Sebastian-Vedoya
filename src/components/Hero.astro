---
export interface Props {
  cv?: string;
  foto?: string;
}
const { cv, foto } = Astro.props;

const BASE = (import.meta.env.BASE_URL || "/").replace(/\/+$/, "");
const cvUrl = cv
  ? (/^https?:\/\//i.test(cv) ? cv : `${BASE}${cv.startsWith("/") ? cv : `/${cv}`}`)
  : `${BASE}/files/CV.pdf`;
const fotoUrl = foto
  ? (/^https?:\/\//i.test(foto) ? foto : `${BASE}${foto.startsWith("/") ? foto : `/${foto}`}`)
  : `${BASE}/assets/foto-hero.jpeg`;
---

<section id="inicio" class="hero hero-stage section section--flush-bottom" aria-label="Presentaci칩n">
  <div class="container hero-stage-grid">
    <div class="stage-panel">
      <h1 class="hero-title">
        Sebasti치n Vedoya M.
        <span class="hero-sub">Comunicaci칩n Estrat칠gica</span>
      </h1>

      <p class="lead">
        Estratega en comunicaci칩n con m치s de 10 a침os de experiencia en medios y gobierno.
        Me dedico a buscar respuestas complejas para entornos complejos.
      </p>

      <!-- Foto -->
      <div class="photo-float js-stage" id="heroPhoto">
        <img src={fotoUrl} alt="Sebasti치n Vedoya M." loading="lazy" />
      </div>

      <!-- Contacto -->
      <div class="cta-row js-stage" id="heroContact">
        <a class="btn btn-outline" href={cvUrl} download>Descargar CV</a>
        <a class="chip" href="mailto:seba.vedoya@gmail.com">seba.vedoya@gmail.com</a>
        <a class="chip" href="https://www.linkedin.com/in/sebastianvedoyam/" target="_blank" rel="noopener">LinkedIn</a>
      </div>
    </div>
  </div>

  <canvas id="bg-net" aria-hidden="true"></canvas>

  <script is:inline>
    // Fade-in r치pido con scroll m칤nimo
    const elPhoto = document.getElementById('heroPhoto');
    const elContact = document.getElementById('heroContact');

    function applyStages(y){
      if (y >= 10) elPhoto.classList.add('is-on');
      else elPhoto.classList.remove('is-on');
      if (y >= 25) elContact.classList.add('is-on');
      else elContact.classList.remove('is-on');
    }

    window.addEventListener('scroll', ()=>applyStages(window.scrollY||0), { passive:true });
    applyStages(window.scrollY||0);
  </script>
</section>

<style>
.hero-stage {
  min-height: 60vh; /* 游댷 compactado totalmente */
}
.stage-panel {
  position: sticky;
  top: 8vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 5vh 0 1vh;
}

.hero-title {
  margin: 0 0 .6rem;
}
.hero-title .hero-sub {
  display: block;
  margin-top: .15rem;
  color: var(--copper);
}

.photo-float {
  margin-top: .8rem;
  opacity: 0;
  transform: translateY(6px);
  transition: opacity .18s ease, transform .18s ease;
  filter: drop-shadow(0 10px 24px rgba(0,0,0,.4));
}
.photo-float.is-on { opacity: 1; transform: none; }

.photo-float img {
  width: 300px;
  height: 360px;
  object-fit: cover;
  object-position: center top;
  border-radius: 14px;
  border: 3px solid #0f1720;
  box-shadow: 0 8px 28px rgba(0,0,0,.55);
}

.cta-row {
  display: flex;
  gap: .75rem;
  flex-wrap: wrap;
  margin-top: .8rem;
  justify-content: center;
  opacity: 0;
  transform: translateY(5px);
  transition: opacity .18s ease, transform .18s ease;
}
.cta-row.is-on { opacity: 1; transform: none; }

@media (max-width:1040px){
  .photo-float img{ width:260px; height:320px; }
}
@media (max-width:640px){
  .photo-float img{ width:220px; height:280px; }
}
</style>